(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{398:function(e,t,r){var content=r(430);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("eba05a26",content,!0,{sourceMap:!1})},429:function(e,t,r){"use strict";r(398)},430:function(e,t,r){var n=r(18)(!1);n.push([e.i,"form[data-v-26d2a107]{width:400px;margin:3rem auto auto}button[data-v-26d2a107]{width:100%}",""]),e.exports=n},454:function(e,t,r){"use strict";r.r(t);r(57),r(30),r(11);var n=r(9),o=(r(48),{layout:"dashboard",asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.store,t.next=3,r.$get("/users/roles");case 3:return o=t.sent,l=n.state.user.collectId,c=n.getters.token,t.abrupt("return",{token:c,roles:o,collectId:l});case 7:case"end":return t.stop()}}),t)})))()},data:function(){return{lastname:"",firstname:"",email:"",role:"",password:"123456789"}},head:function(){return{title:"Ajouter un agent — Dashboard eCollectivités"}},methods:{addAgent:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={Authorization:"Bearer ".concat(e.token)},t.next=4,e.$axios.$post("/users",{firstname:e.firstname,lastname:e.lastname,collectId:e.collectId,role:e.role,email:e.email,password:e.password},{headers:r});case 4:t.sent&&(e.$toast.success("Utilisateur créé avec succès!"),e.firstname="",e.lastname="",e.email=""),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$toast.error("Une erreur est survenue. Veuillez réessayer plus tard.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),l=(r(429),r(8)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"add-agent--wrapper"},[t("h1",[e._v("Ajouter un agent")]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.addAgent()}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"lastname"}},[e._v("Nom :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lastname,expression:"lastname"}],attrs:{id:"lastname",type:"text",required:""},domProps:{value:e.lastname},on:{input:function(t){t.target.composing||(e.lastname=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"firstname"}},[e._v("Prénoms :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.firstname,expression:"firstname"}],attrs:{id:"firstname",type:"text",required:""},domProps:{value:e.firstname},on:{input:function(t){t.target.composing||(e.firstname=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"email"}},[e._v("Email :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"role"}},[e._v("Rôle :")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],attrs:{id:"role",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.role=t.target.multiple?r:r[0]}}},e._l(e.roles,(function(r,n){return t("option",{key:n,domProps:{value:r}},[e._v(e._s(r))])})),0)]),e._v(" "),t("div",{staticClass:"form-group"},[t("p",[e._v("\n        Le mot de passe par défaut du compte est : "+e._s(e.password)+" "),t("br"),e._v("\n        Il sera réinitialisé par l'utilisateur à la première connexion.\n      ")])]),e._v(" "),t("button",{attrs:{type:"submit"}},[e._v("Ajouter")])])])}),[],!1,null,"26d2a107",null);t.default=component.exports}}]);