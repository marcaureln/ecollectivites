(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{392:function(e,t,r){var content=r(418);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("d256c866",content,!0,{sourceMap:!1})},417:function(e,t,r){"use strict";r(392)},418:function(e,t,r){var n=r(18)(!1);n.push([e.i,'.wrapper[data-v-3424757c]{width:400px;margin:3rem auto}h1[data-v-3424757c]{font-family:"Barlow Condensed","Roboto",sans-serif;font-weight:700;text-align:center;font-size:4rem;line-height:1;margin:0 0 2rem}form[data-v-3424757c]{width:100%;margin:auto}label[data-v-3424757c]{display:block;margin-bottom:1rem;font-size:1.25rem;font-weight:700}button[data-v-3424757c],input[type=submit][data-v-3424757c]{background:#ff5140;color:#fff;transition:background .25s ease;border-radius:3px;border:none;margin:0;padding:.75rem 1rem;text-align:center;font-weight:700;font-size:1rem;cursor:pointer;width:100%}button[data-v-3424757c]:focus,button[data-v-3424757c]:hover,input[type=submit][data-v-3424757c]:focus,input[type=submit][data-v-3424757c]:hover{background:#e61400}input[data-v-3424757c],select[data-v-3424757c]{background-color:transparent;border:1px solid;border-radius:3px;box-shadow:none;padding:.5rem;font-size:1rem;font-family:"Roboto",sans-serif;width:100%}input[data-v-3424757c]:focus,select[data-v-3424757c]:focus{border-color:#e61400;outline:0}.form-group[data-v-3424757c]{margin-bottom:2rem;width:100%}a[data-v-3424757c]{display:block;font-weight:700;margin:1rem 0}',""]),e.exports=n},445:function(e,t,r){"use strict";r.r(t);r(57),r(30),r(11),r(31),r(24),r(36),r(20),r(37);var n=r(15),o=r(9),l=(r(216),r(48),r(23));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,m,d,f,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.store,t.next=3,r.$get("/collectivites/types");case 3:return o=t.sent,t.next=6,r.$get("/collectivites");case 6:return l=t.sent,c=n.state.user,m=c.collectId,d=c.lastname,f=c.firstname,v=n.getters.loginMethod,t.abrupt("return",{collectTypes:o,collects:l,collectId:m,lastname:d,firstname:f,email:c.email,phone:c.phone,isAgent:c.isAgent,loginMethod:v,token:n.getters.token});case 13:case"end":return t.stop()}}),t)})))()},head:function(){return{title:"Mon Compte — eCollectivités"}},methods:m(m({},Object(l.b)(["fetchUser"])),{},{findCollectTypeLabel:function(e){return this.collectTypes.find((function(t){return t.collectTypeId===e})).collectTypeLabel},updateInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer ".concat(e.token)},t.next=3,e.$axios.$post("/me/update",{firstname:e.firstname,lastname:e.lastname,collectId:e.collectId,email:e.email,phone:e.phone},{headers:r});case 3:t.sent&&(e.fetchUser(),window.alert("Informations modifiées avec succès"));case 5:case"end":return t.stop()}}),t)})))()}})},f=(r(417),r(8)),component=Object(f.a)(d,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"wrapper"},[t("h1",[e._v("Mon Compte")]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.updateInfo()}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"lastname"}},[e._v("Nom :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lastname,expression:"lastname"}],attrs:{id:"lastname",type:"text",required:""},domProps:{value:e.lastname},on:{input:function(t){t.target.composing||(e.lastname=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"firstname"}},[e._v("Prénoms :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.firstname,expression:"firstname"}],attrs:{id:"firstname",type:"text",required:""},domProps:{value:e.firstname},on:{input:function(t){t.target.composing||(e.firstname=t.target.value)}}})]),e._v(" "),e.isAgent||"email"!==e.loginMethod?e._e():t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"email"}},[e._v("Email :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email",type:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),e.isAgent||"phone"!==e.loginMethod?e._e():t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"phone"}},[e._v("Phone :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{id:"phone",type:"tel",required:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"collect"}},[e._v("Collectivité :")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model.number",value:e.collectId,expression:"collectId",modifiers:{number:!0}}],attrs:{id:"collect",disabled:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var r="_value"in t?t._value:t.value;return e._n(r)}));e.collectId=t.target.multiple?r:r[0]}}},e._l(e.collects,(function(r){return t("option",{key:r.collectId,domProps:{value:r.collectId}},[e._v("\n          "+e._s(r.collectName)+" ("+e._s(e.findCollectTypeLabel(r.collectTypeId))+")\n        ")])})),0)]),e._v(" "),t("button",{attrs:{type:"submit"}},[e._v("Modifier")]),e._v(" "),"email"===e.loginMethod?t("nuxt-link",{attrs:{to:"/reinitialiser-mdp"}},[e._v("\n      Cliquez ici pour modifier mot de passe\n    ")]):e._e()],1)])}),[],!1,null,"3424757c",null);t.default=component.exports}}]);